<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>12EC35018_A4: chef.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">12EC35018_A4
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">chef.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Function to generate resources (Maach, Dal &amp; Bhaat) as described in Assignment 4.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;sys/types.h&gt;</code><br/>
<code>#include &lt;pthread.h&gt;</code><br/>
<code>#include &lt;semaphore.h&gt;</code><br/>
<code>#include &lt;sys/time.h&gt;</code><br/>
<code>#include &lt;sys/ipc.h&gt;</code><br/>
<code>#include &lt;sys/shm.h&gt;</code><br/>
<code>#include &lt;fcntl.h&gt;</code><br/>
<code>#include &lt;sys/stat.h&gt;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for chef.c:</div>
<div class="dyncontent">
<div class="center"><img src="chef_8c__incl.png" border="0" usemap="#chef_8c" alt=""/></div>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmy__arg.html">my_arg</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure for passing arguments to function in 'pthread_create' id: process id, 1: Maach &amp; Dal, 2: Dal &amp; Bhaat, 3: Bhaat &amp; Maach slTime: slTime for the process.  <a href="structmy__arg.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a68512a950d80af447876a18af31c5d76"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a68512a950d80af447876a18af31c5d76"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_SLEEP_TIME</b>&#160;&#160;&#160;6</td></tr>
<tr class="separator:a68512a950d80af447876a18af31c5d76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56266eb0d265d888c93163b897ab5875"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a56266eb0d265d888c93163b897ab5875"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>FIXED_SLEEP_TIME</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a56266eb0d265d888c93163b897ab5875"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addfc815a3798ef54f945c6ce9a3f8d54"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chef_8c.html#addfc815a3798ef54f945c6ce9a3f8d54">SHARED_MEM_COUNTER</a>&#160;&#160;&#160;1000</td></tr>
<tr class="separator:addfc815a3798ef54f945c6ce9a3f8d54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0bd7e98f103483772c5ea0c8262a2f2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa0bd7e98f103483772c5ea0c8262a2f2"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SHARED_MEM_BREAK</b>&#160;&#160;&#160;1001</td></tr>
<tr class="separator:aa0bd7e98f103483772c5ea0c8262a2f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d73a4f29ccbd7b45d689790699e6e8a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2d73a4f29ccbd7b45d689790699e6e8a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SHARED_MEM_ITEMS</b>&#160;&#160;&#160;1002</td></tr>
<tr class="separator:a2d73a4f29ccbd7b45d689790699e6e8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acff23a91474ff0e3af17e758dcf71c61"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chef_8c.html#acff23a91474ff0e3af17e758dcf71c61">SEM_NAME_MAACH</a>&#160;&#160;&#160;&quot;/semMaach&quot;</td></tr>
<tr class="separator:acff23a91474ff0e3af17e758dcf71c61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9028ebdc225a5e94b3f81da5cbec575a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9028ebdc225a5e94b3f81da5cbec575a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SEM_NAME_DAL</b>&#160;&#160;&#160;&quot;/semDal&quot;</td></tr>
<tr class="separator:a9028ebdc225a5e94b3f81da5cbec575a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1127525d53d4b92e0067b3047a253bc9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1127525d53d4b92e0067b3047a253bc9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SEM_NAME_BHAAT</b>&#160;&#160;&#160;&quot;/semBhaat&quot;</td></tr>
<tr class="separator:a1127525d53d4b92e0067b3047a253bc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9224b4b46a93e4f4d1209eb5c184d067"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chef_8c.html#a9224b4b46a93e4f4d1209eb5c184d067">enterLog</a> (int id, char *item1)</td></tr>
<tr class="memdesc:a9224b4b46a93e4f4d1209eb5c184d067"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for making entry in the LOG file.  <a href="#a9224b4b46a93e4f4d1209eb5c184d067">More...</a><br/></td></tr>
<tr class="separator:a9224b4b46a93e4f4d1209eb5c184d067"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47a1821e59b2065ab6054a1b958c1709"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chef_8c.html#a47a1821e59b2065ab6054a1b958c1709">runService</a> (void *myStruct)</td></tr>
<tr class="memdesc:a47a1821e59b2065ab6054a1b958c1709"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for running task for all threads in chef processes.  <a href="#a47a1821e59b2065ab6054a1b958c1709">More...</a><br/></td></tr>
<tr class="separator:a47a1821e59b2065ab6054a1b958c1709"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cd1bbfbfb4c662f2598d4d5fce890e6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chef_8c.html#a3cd1bbfbfb4c662f2598d4d5fce890e6">initChef</a> ()</td></tr>
<tr class="memdesc:a3cd1bbfbfb4c662f2598d4d5fce890e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise parameters needed for running all processes(e.g. File, threads etc)  <a href="#a3cd1bbfbfb4c662f2598d4d5fce890e6">More...</a><br/></td></tr>
<tr class="separator:a3cd1bbfbfb4c662f2598d4d5fce890e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a301cc8cf2370e740a88c31bdeefa3aa4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chef_8c.html#a301cc8cf2370e740a88c31bdeefa3aa4">runChef</a> (int numC, char **fileC)</td></tr>
<tr class="memdesc:a301cc8cf2370e740a88c31bdeefa3aa4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to decide sleep time, LOG file name and to run the Chef process.  <a href="#a301cc8cf2370e740a88c31bdeefa3aa4">More...</a><br/></td></tr>
<tr class="separator:a301cc8cf2370e740a88c31bdeefa3aa4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chef_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="memdesc:a0ddf1224851353fc92bfbff6f499fa97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main process/ Chef process. Runs three threads and makes LOG entry for resource allocation by them.  <a href="#a0ddf1224851353fc92bfbff6f499fa97">More...</a><br/></td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a5f5c472debcd8e3487d92a65635406c3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5f5c472debcd8e3487d92a65635406c3"></a>
sem_t *&#160;</td><td class="memItemRight" valign="bottom"><b>maachSem</b></td></tr>
<tr class="separator:a5f5c472debcd8e3487d92a65635406c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef0d7b2f0de76aef38c0829d39da706b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aef0d7b2f0de76aef38c0829d39da706b"></a>
sem_t *&#160;</td><td class="memItemRight" valign="bottom"><b>dalSem</b></td></tr>
<tr class="separator:aef0d7b2f0de76aef38c0829d39da706b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b8c3e6576e3af70242b382f12e8b0e3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2b8c3e6576e3af70242b382f12e8b0e3"></a>
sem_t *&#160;</td><td class="memItemRight" valign="bottom"><b>bhaatSem</b></td></tr>
<tr class="separator:a2b8c3e6576e3af70242b382f12e8b0e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d831573e3e93d701041d2b8c72ca9c0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3d831573e3e93d701041d2b8c72ca9c0"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>maachVal</b></td></tr>
<tr class="separator:a3d831573e3e93d701041d2b8c72ca9c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6749533b4414091a76bf1751a41fc7e9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6749533b4414091a76bf1751a41fc7e9"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>dalVal</b></td></tr>
<tr class="separator:a6749533b4414091a76bf1751a41fc7e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a76caf1fba9a56f0e8cc950997d92dc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8a76caf1fba9a56f0e8cc950997d92dc"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>bhaatVal</b></td></tr>
<tr class="separator:a8a76caf1fba9a56f0e8cc950997d92dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee5795df55c8e5e97048776e5eac79fa"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aee5795df55c8e5e97048776e5eac79fa"></a>
struct <a class="el" href="structmy__arg.html">my_arg</a>&#160;</td><td class="memItemRight" valign="bottom"><b>argThrd</b> [3]</td></tr>
<tr class="separator:aee5795df55c8e5e97048776e5eac79fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8807d215d2ee6d9779d76aeb1147430"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chef_8c.html#ac8807d215d2ee6d9779d76aeb1147430">shmid</a></td></tr>
<tr class="memdesc:ac8807d215d2ee6d9779d76aeb1147430"><td class="mdescLeft">&#160;</td><td class="mdescRight">shmid Shared memory ID for variable used for breaking process  <a href="#ac8807d215d2ee6d9779d76aeb1147430">More...</a><br/></td></tr>
<tr class="separator:ac8807d215d2ee6d9779d76aeb1147430"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23dcc9b3c67a17b86c5b47c21ace0cd5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a23dcc9b3c67a17b86c5b47c21ace0cd5"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>shmItem</b></td></tr>
<tr class="separator:a23dcc9b3c67a17b86c5b47c21ace0cd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af331c4e7ea5d9829497c960da7c06966"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af331c4e7ea5d9829497c960da7c06966"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>shmCount</b></td></tr>
<tr class="separator:af331c4e7ea5d9829497c960da7c06966"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13c786272ec84e56f23ff4d183075d9b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a13c786272ec84e56f23ff4d183075d9b"></a>
int *&#160;</td><td class="memItemRight" valign="bottom"><b>chefAddr</b></td></tr>
<tr class="separator:a13c786272ec84e56f23ff4d183075d9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d7f46a0c061e1ae7f2fa9deedec0e35"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5d7f46a0c061e1ae7f2fa9deedec0e35"></a>
int *&#160;</td><td class="memItemRight" valign="bottom"><b>itemCnt</b></td></tr>
<tr class="separator:a5d7f46a0c061e1ae7f2fa9deedec0e35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd9db40e3361ae09188795e8cbe19752"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afd9db40e3361ae09188795e8cbe19752"></a>
int *&#160;</td><td class="memItemRight" valign="bottom"><b>count</b></td></tr>
<tr class="separator:afd9db40e3361ae09188795e8cbe19752"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af46e4c1aa446458e089f921e7a8de3e6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af46e4c1aa446458e089f921e7a8de3e6"></a>
struct timeval start&#160;</td><td class="memItemRight" valign="bottom"><b>stop</b></td></tr>
<tr class="separator:af46e4c1aa446458e089f921e7a8de3e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31373772250f12767e6c56fc67a0d97b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a31373772250f12767e6c56fc67a0d97b"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>slTime</b> [3]</td></tr>
<tr class="separator:a31373772250f12767e6c56fc67a0d97b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad554925edc46bb2387dd14555e856fd2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad554925edc46bb2387dd14555e856fd2"></a>
pthread_mutex_t&#160;</td><td class="memItemRight" valign="bottom"><b>chefMutex</b></td></tr>
<tr class="separator:ad554925edc46bb2387dd14555e856fd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23e0ff0e1725da007e59b4e49b2edc74"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a23e0ff0e1725da007e59b4e49b2edc74"></a>
pthread_t&#160;</td><td class="memItemRight" valign="bottom"><b>service</b> [3]</td></tr>
<tr class="separator:a23e0ff0e1725da007e59b4e49b2edc74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19db7b85b379d6de8dac7531fdbb2786"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a19db7b85b379d6de8dac7531fdbb2786"></a>
pthread_attr_t&#160;</td><td class="memItemRight" valign="bottom"><b>chefAttr</b> [3]</td></tr>
<tr class="separator:a19db7b85b379d6de8dac7531fdbb2786"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d8ce868d52854c877a1b39bd02bc9a8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5d8ce868d52854c877a1b39bd02bc9a8"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>breaker</b></td></tr>
<tr class="separator:a5d8ce868d52854c877a1b39bd02bc9a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9d244a12aa647e496b5924344fcda14"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae9d244a12aa647e496b5924344fcda14"></a>
char&#160;</td><td class="memItemRight" valign="bottom"><b>fileName</b> [256]</td></tr>
<tr class="separator:ae9d244a12aa647e496b5924344fcda14"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Function to generate resources (Maach, Dal &amp; Bhaat) as described in Assignment 4. </p>
<dl class="section author"><dt>Author</dt><dd>Vishnu Dutt Sharma (12EC35018)</dd></dl>
<p>Function takes user input to perform task allocation on 3 threads(tasks being semaphore signalling). The user input decides the sleep time for the processes running in threads. If no argument is provided (no argv[1]), then delay is equal to FIXED_SLEEP_TIME and logFixedDelay.csv is the LOG file. Otherwise, If three arguments are provided, they are stored in sleep time varibles for the three processes Else if argv[1] is '1': Fixed delay, delay = argv[2], logFixedDelay.txt is the LOG file Else If argv[2] is '2': Random delay, limited by MAX_SLEEP_TIME, logRandDelay.txt is the LOG file Otherwise, No delay i.e. delay = 0, logNoDelay.txt is the LOG file </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="acff23a91474ff0e3af17e758dcf71c61"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SEM_NAME_MAACH&#160;&#160;&#160;&quot;/semMaach&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>SEM_NAME_MAACH string used as name in named semaphore for Maach SEM_NAME_DAL string used as name in named semaphore for Dal SEM_NAME_BHAAT string used as name in named semaphore for Bhaat </p>

</div>
</div>
<a class="anchor" id="addfc815a3798ef54f945c6ce9a3f8d54"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SHARED_MEM_COUNTER&#160;&#160;&#160;1000</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>SHARED_MEM_COUNTER value of the key for shared memory used for storing counter for serial number in LOG file SHARED_MEM_BREAK value of the key for shared memory used for storing the variable responsible for breaking the process loops SHARED_MEM_ITEMS value of the key for shared memory used for storing number of Maach, Dal and Bhaat produced by Chef process </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a9224b4b46a93e4f4d1209eb5c184d067"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enterLog </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>item1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function for making entry in the LOG file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>ID (provided by us) of the thread </td></tr>
    <tr><td class="paramname">item1</td><td>String indicating the name of the item (Maach, Dal or Bhaat)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Void <pre class="fragment">This function makes entry in the LOG file (pointed by 'fileName')
as soon as a semaphore becomes zero. It writes 'Serial Number',
'Thread Number', 'Entry Maker','Item name' and 'Time elasped since start of 'Chef' process</pre> </dd></dl>

</div>
</div>
<a class="anchor" id="a3cd1bbfbfb4c662f2598d4d5fce890e6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initChef </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialise parameters needed for running all processes(e.g. File, threads etc) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Void <pre class="fragment">This function opens file indicated by fileName and writes title, initializes  mutex,
initializes three semaphores  maachSem ,  dalSem,  bhaatSem , initializes attributes
for three threads (default values) then create three threads and call processes in them</pre> </dd></dl>

</div>
</div>
<a class="anchor" id="a0ddf1224851353fc92bfbff6f499fa97"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main process/ Chef process. Runs three threads and makes LOG entry for resource allocation by them. </p>
<p>Main function, initializes sleep time and decided file to be written to &amp; runs waiter process.</p>
<p>Main process, runs all other processes Function forks and runs other process using 'execlp'.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>Number of arguments provided by user </td></tr>
    <tr><td class="paramname">argv[]</td><td>Arguments for deciding sleep time for threads and for opening specific LOG file</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>'0' for normal exit, '-1' for abnormal exit/error <pre class="fragment">If no argument is provided (no argv[1]), then delay is equal to  FIXED_SLEEP_TIME and  logFixedDelay.txt is the LOG file. Otherwise,
if argv[1] is '1': Fixed delay, delay = argv[2],  logFixedDelay.txt is the LOG file
If argv[2] is '2': Random delay, limited by  MAX_SLEEP_TIME,  logRandDelay.txt is the LOG file
Otherwise, No delay i.e. delay = 0, logNoDelay.txt is the LOG file</pre></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>Number of arguments provided by user </td></tr>
    <tr><td class="paramname">argv[]</td><td>Arguments for deciding sleep time for threads and for opening specific LOG file</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>'0' for normal exit, '-1' for abnormal exit/error</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>Number of user inputs </td></tr>
    <tr><td class="paramname">argv</td><td>User inputs</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Void </dd></dl>

</div>
</div>
<a class="anchor" id="a301cc8cf2370e740a88c31bdeefa3aa4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void runChef </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numC</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>fileC</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to decide sleep time, LOG file name and to run the Chef process. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">numC</td><td>Number of argumnets, equal to 'argc' </td></tr>
    <tr><td class="paramname">fileC</td><td>Same as 'argv'</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Void </dd></dl>

</div>
</div>
<a class="anchor" id="a47a1821e59b2065ab6054a1b958c1709"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * runService </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>myStruct</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function for running task for all threads in chef processes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>myStruct Structure for getting argumnets: process id &amp; sleep time <pre class="fragment">This function runs in an infinite loop breakable by global
variable breaker (signalled by main process). Using id and Switch, first it
chooses the type of resuorces and sleep time for thread. Then it makes the thread sleep for time indicated by slTime array and then locks the
thread by mutex . After this, it increaments
value of semaphore for next processes. After that, lock is opened. If
breaker is '1', it break out of loop otherwise same process is repeated again</pre> </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ac8807d215d2ee6d9779d76aeb1147430"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int shmid</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>shmid Shared memory ID for variable used for breaking process </p>
<p>shmItem Shared memory ID for integer array of size 3, total number of items shmCount Shared memory ID for counter for writing Serial number in the LOG file chefAddr Variable for storing process breaker varible itemCnt Variable for storing total number of resources available (Maach, Dal &amp; Bhaat) count Variable for storing ciunter for Serial Number </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Aug 27 2015 10:04:42 for 12EC35018_A4 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
